<!DOCTYPE html>
<html>
<head>
    <title>Simple API Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        #response { 
            background: #f5f5f5; 
            padding: 20px; 
            border: 1px solid #ddd;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <h1>API Response Inspector</h1>
    <button onclick="testAPI()">Test API</button>
    <button onclick="testWithParams()">Test With Params</button>
    <div id="response">Loading...</div>

    <script>
        const API_BASE_URL = "http://127.0.0.1:6346/api";

        async function testAPI() {
            try {
                const response = await fetch(`${API_BASE_URL}/products`, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                const data = await response.json();
                
                document.getElementById('response').textContent = JSON.stringify(data, null, 2);
                console.log("Full response:", data);
                
                // Log structure
                console.log("=== STRUCTURE ===");
                console.log("Type:", Array.isArray(data) ? "ARRAY" : typeof data);
                console.log("Has success:", 'success' in data);
                console.log("Has message:", 'message' in data);
                console.log("Has data:", 'data' in data);
                
                if (data.data) {
                    console.log("data type:", Array.isArray(data.data) ? "ARRAY" : typeof data.data);
                    console.log("data keys:", Object.keys(data.data || {}));
                    
                    if (data.data.data) {
                        console.log("data.data type:", Array.isArray(data.data.data) ? "ARRAY" : typeof data.data.data);
                        console.log("data.data length:", data.data.data.length);
                        if (data.data.data.length > 0) {
                            console.log("First item:", data.data.data[0]);
                        }
                    }
                }
                
            } catch (error) {
                document.getElementById('response').textContent = "ERROR: " + error.message;
            }
        }
        
        async function testWithParams() {
            try {
                const response = await fetch(`${API_BASE_URL}/products?page=1&per_page=12`, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                const data = await response.json();
                
                document.getElementById('response').textContent = JSON.stringify(data, null, 2);
                console.log("Response with params:", data);
                
            } catch (error) {
                document.getElementById('response').textContent = "ERROR: " + error.message;
            }
        }
        
        testAPI();
    </script>
</body>
</html>
