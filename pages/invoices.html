<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Quản Lý Đơn Hàng - PhoneStore Admin</title>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="../css/pages/order.css">
        <script src="../js/auth.js"></script>
    </head>
    <body>
        <div class="app-container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="logo">
                        <i class="fas fa-mobile-alt logo-icon"></i>
                        <span class="logo-text">PhoneStore</span>
                    </div>
                    <button class="toggle-btn" id="toggleSidebar">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>

                <div class="sidebar-menu">
                    <a href="../index.html" class="menu-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="menu-text">Dashboard</span>
                    </a>
                    <a href="products.html" class="menu-item">
                        <i class="fas fa-box"></i>
                        <span class="menu-text">Sản Phẩm</span>
                        <span class="menu-badge">86</span>
                    </a>
                    <a href="invoices.html" class="menu-item active">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="menu-text">Đơn Hàng</span>
                        <span class="menu-badge">15</span>
                    </a>
                    <a href="customers.html" class="menu-item">
                        <i class="fas fa-users"></i>
                        <span class="menu-text">Khách Hàng</span>
                    </a>
                    <a href="Employee.html" class="menu-item">
                        <i class="fas fa-user-tie"></i>
                        <span class="menu-text">Nhân Viên</span>
                    </a>
                    <a href="Supplier.html" class="menu-item">
                        <i class="fas fa-truck"></i>
                        <span class="menu-text">Nhà Cung Cấp</span>
                    </a>
                </div>
            </div>

            <!-- Nội dung chính -->
            <div class="main-content">
                <!-- Header -->
                <header class="header">
                    <div class="header-left">
                        <h1>Quản Lý Đơn Hàng</h1>
                        <div class="breadcrumb">
                            <a href="../index.html">Dashboard</a>
                            <i class="fas fa-chevron-right"></i>
                            <span>Đơn Hàng</span>
                        </div>
                    </div>
                    <div class="header-right">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text"
                                placeholder="Tìm kiếm đơn hàng...">
                        </div>
                        <div class="notifications">
                            <i class="fas fa-bell notification-icon"></i>
                            <span class="notification-count">3</span>
                        </div>
                        <div class="user-profile">
                            <div class="user-avatar">AT</div>
                            <div class="user-info">
                                <span class="user-name">Admin Tùng</span>
                                <span class="user-role">Quản trị viên</span>
                            </div>
                            <i class="fas fa-chevron-down"
                                style="color: var(--gray-500); font-size: 14px;"></i>
                        </div>
                    </div>
                </header>

                <!-- Nội dung Đơn Hàng -->
                <div class="orders-content">
                    <!-- Page Header -->
                    <div class="page-header">
                        <h1 class="page-title">
                            <i class="fas fa-shopping-cart"></i>
                            Quản Lý Đơn Hàng
                        </h1>
                        <div class="page-actions">
                            <button class="btn btn-secondary" id="exportBtn">
                                <i class="fas fa-download"></i>
                                Xuất Excel
                            </button>
                            <button class="btn btn-primary" id="createOrderBtn">
                                <i class="fas fa-plus"></i>
                                Tạo Đơn Hàng
                            </button>
                        </div>
                    </div>

                    <!-- Thống kê nhanh -->
                    <div class="stats-container">
                        <div class="stat-card active" data-filter="all">
                            <div class="stat-icon total">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="stat-number">156</div>
                            <div class="stat-label">Tổng Đơn Hàng</div>
                        </div>

                        <div class="stat-card" data-filter="pending">
                            <div class="stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-number">15</div>
                            <div class="stat-label">Chờ Xử Lý</div>
                        </div>

                        <div class="stat-card" data-filter="processing">
                            <div class="stat-icon processing">
                                <i class="fas fa-truck"></i>
                            </div>
                            <div class="stat-number">24</div>
                            <div class="stat-label">Đang Giao</div>
                        </div>

                        <div class="stat-card" data-filter="completed">
                            <div class="stat-icon completed">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-number">112</div>
                            <div class="stat-label">Hoàn Thành</div>
                        </div>

                        <div class="stat-card" data-filter="cancelled">
                            <div class="stat-icon cancelled">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-number">5</div>
                            <div class="stat-label">Đã Hủy</div>
                        </div>
                    </div>

                    <!-- Tabs Navigation -->
                    <div class="orders-tabs">
                        <button class="tab-btn active" data-status="all">
                            <i class="fas fa-list"></i>
                            Tất Cả
                            <span class="tab-badge">156</span>
                        </button>
                        <button class="tab-btn" data-status="pending">
                            <i class="fas fa-clock"></i>
                            Chờ Xử Lý
                            <span class="tab-badge">15</span>
                        </button>
                        <button class="tab-btn" data-status="paid">
                            <i class="fas fa-check-circle"></i>
                            Đã Thanh Toán
                            <span class="tab-badge">112</span>
                        </button>
                        <button class="tab-btn" data-status="unpaid">
                            <i class="fas fa-times-circle"></i>
                            Chưa Thanh Toán
                            <span class="tab-badge">5</span>
                        </button>
                        <!-- Có thể xóa hoặc ẩn tab "Đã Hủy" -->
                    </div>

                    <!-- Bộ lọc đơn hàng -->
                    <div class="filter-container">
                        <div class="filter-header">
                            <h3 class="filter-title">
                                <i class="fas fa-filter"></i>
                                Bộ Lọc Đơn Hàng
                            </h3>
                            <button class="filter-reset" id="resetFilters">
                                <i class="fas fa-redo"></i>
                                Đặt Lại Bộ Lọc
                            </button>
                        </div>

                        <div class="filter-grid">
                            <div class="filter-group">
                                <label class="filter-label">Trạng Thái</label>
                                <select class="filter-select" id="statusFilter">
                                    <option value>Tất cả trạng thái</option>
                                    <option value="pending">Chờ xử lý</option>
                                    <option value="processing">Đang xử
                                        lý</option>
                                    <option value="shipping">Đang giao
                                        hàng</option>
                                    <option value="completed">Hoàn
                                        thành</option>
                                    <option value="cancelled">Đã hủy</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label class="filter-label">Phương Thức Thanh
                                    Toán</label>
                                <select class="filter-select"
                                    id="paymentFilter">
                                    <option value>Tất cả phương thức</option>
                                    <option value="cod">Thanh toán khi nhận
                                        hàng</option>
                                    <option value="bank">Chuyển khoản ngân
                                        hàng</option>
                                    <option value="card">Thẻ tín dụng/ghi
                                        nợ</option>
                                    <option value="momo">Ví MoMo</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label class="filter-label">Khoảng Giá</label>
                                <select class="filter-select" id="amountFilter">
                                    <option value>Tất cả mức giá</option>
                                    <option value="low">Dưới 5 triệu</option>
                                    <option value="medium">5 - 15 triệu</option>
                                    <option value="high">15 - 30 triệu</option>
                                    <option value="premium">Trên 30
                                        triệu</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label class="filter-label">Khoảng Thời
                                    Gian</label>
                                <div class="date-range">
                                    <input type="date"
                                        class="filter-input date-input"
                                        id="dateFrom">
                                    <span>đến</span>
                                    <input type="date"
                                        class="filter-input date-input"
                                        id="dateTo">
                                </div>
                            </div>
                        </div>

                        <div class="filter-actions">
                            <button class="btn btn-secondary" id="clearFilters">
                                <i class="fas fa-times"></i>
                                Xóa Lọc
                            </button>
                            <button class="btn btn-primary" id="applyFilters">
                                <i class="fas fa-filter"></i>
                                Áp Dụng Lọc
                            </button>
                        </div>
                    </div>

                    <!-- Bảng đơn hàng -->
                    <div class="orders-table-container">
                        <div class="table-header">
                            <div class="table-info">
                                Hiển thị <strong>10</strong> trong tổng số
                                <strong>156</strong> đơn hàng
                            </div>
                            <div class="table-actions">
                                <select class="filter-select"
                                    style="width: 120px;" id="rowsPerPage">
                                    <option value="10">10 dòng/trang</option>
                                    <option value="25">25 dòng/trang</option>
                                    <option value="50">50 dòng/trang</option>
                                    <option value="100">100 dòng/trang</option>
                                </select>
                                <button class="btn btn-outline"
                                    id="refreshTable">
                                    <i class="fas fa-sync-alt"></i>
                                    Làm Mới
                                </button>
                            </div>
                        </div>

                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th style="width: 40px;">
                                        <input type="checkbox" id="selectAll">
                                    </th>
                                    <th style="width: 200px;">Mã Đơn Hàng</th>
                                    <th style="width: 200px;">Khách Hàng</th>
                                    <th>Sản Phẩm</th>
                                    <th>Tổng Tiền</th>
                                    <th>Thanh Toán</th>
                                    <th>Trạng Thái</th>
                                    <th style="width: 140px;">Thao Tác</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                                <!-- Dữ liệu đơn hàng sẽ được thêm bằng JavaScript -->
                            </tbody>
                        </table>

                        <!-- Phân trang -->
                        <div class="pagination">
                            <button class="pagination-btn" id="firstPage">
                                <i class="fas fa-angle-double-left"></i>
                            </button>
                            <button class="pagination-btn" id="prevPage">
                                <i class="fas fa-chevron-left"></i>
                            </button>

                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">4</button>
                            <button class="pagination-btn">5</button>

                            <button class="pagination-btn" id="nextPage">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <button class="pagination-btn" id="lastPage">
                                <i class="fas fa-angle-double-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Chi Tiết Đơn Hàng -->
        <div class="modal" id="orderDetailModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Chi Tiết Đơn Hàng</h3>
                    <button class="modal-close"
                        id="closeOrderModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="order-detail-container" id="orderDetailContent">
                        <!-- Nội dung chi tiết đơn hàng sẽ được thêm bằng JavaScript -->
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="order-status-current" id="currentOrderStatus">
                        Trạng thái: <span
                            class="order-status status-pending">Chờ xử lý</span>
                    </div>
                    <div class="order-actions-footer" id="orderActionsFooter">
                        <button class="btn btn-secondary" id="printInvoiceBtn">
                            <i class="fas fa-print"></i>
                            In Hóa Đơn
                        </button>
                        <button class="btn btn-warning" id="updateStatusBtn">
                            <i class="fas fa-sync-alt"></i>
                            Cập Nhật Trạng Thái
                        </button>
                        <button class="btn btn-danger" id="cancelOrderBtn">
                            <i class="fas fa-times"></i>
                            Hủy Đơn Hàng
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Cập Nhật Trạng Thái -->
        <div class="modal" id="updateStatusModal">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h3 class="modal-title">Cập Nhật Trạng Thái Đơn Hàng</h3>
                    <button class="modal-close"
                        id="closeStatusModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="margin-bottom: 24px;">
                        <label class="filter-label">Trạng thái hiện tại:</label>
                        <div id="currentStatusDisplay"
                            class="order-status status-pending"
                            style="display: inline-block; margin-left: 12px;">
                            Chờ xử lý
                        </div>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">Cập nhật trạng thái
                            mới:</label>
                        <select class="filter-select" id="newStatusSelect">
                            <option value="pending">Chờ xử lý</option>
                            <option value="paid">Đã thanh toán</option>
                            <option value="unpaid">Chưa thanh toán</option>
                            <option value="processing">Đang xử lý</option>
                            <option value="shipping">Đang giao hàng</option>
                            <option value="completed">Hoàn thành</option>
                            <option value="cancelled">Đã hủy</option>
                        </select>
                    </div>

                    <div class="filter-group" style="margin-top: 20px;">
                        <label class="filter-label">Ghi chú (tùy chọn):</label>
                        <textarea class="filter-input" id="statusNote" rows="3"
                            placeholder="Nhập ghi chú về việc thay đổi trạng thái..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelStatusBtn">
                        <i class="fas fa-times"></i>
                        Hủy
                    </button>
                    <button class="btn btn-primary" id="saveStatusBtn">
                        <i class="fas fa-save"></i>
                        Cập Nhật Trạng Thái
                    </button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast">
            <div class="toast-icon success" id="toastIcon">
                <i class="fas fa-check"></i>
            </div>
            <div class="toast-content">
                <h4 id="toastTitle">Thành công!</h4>
                <p id="toastMessage">Hành động đã được thực hiện thành công.</p>
            </div>
            <button class="toast-close" id="closeToast">&times;</button>
        </div>

        <script src="../js/pager/invoices.js"></script>
    </body>
</html>