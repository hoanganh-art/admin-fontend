<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone-Store Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-mobile-alt logo-icon"></i>
                    <span class="logo-text">PhoneStore</span>
                </div>
                <button class="toggle-btn" id="toggleSidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>

            <div class="sidebar-menu">
                <a href="index.html" class="menu-item active">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="menu-text">Dashboard</span>
                </a>
                <a href="/pages/products.html" class="menu-item">
                    <i class="fas fa-box"></i>
                    <span class="menu-text">Sản Phẩm</span>
                    <span class="menu-badge">3</span>
                </a>
                <a href="/pages/orders.html" class="menu-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="menu-text">Đơn Hàng</span>
                    <span class="menu-badge">5</span>
                </a>
                <a href="/pages/customers.html" class="menu-item">
                    <i class="fas fa-users"></i>
                    <span class="menu-text">Khách Hàng</span>
                </a>
                <a href="/pages/employees.html" class="menu-item">
                    <i class="fas fa-user-tie"></i>
                    <span class="menu-text">Nhân Viên</span>
                </a>
                <a href="/pages/inventory.html" class="menu-item">
                    <i class="fas fa-warehouse"></i>
                    <span class="menu-text">Kho Hàng</span>
                </a>
                <a href="/pages/reports.html" class="menu-item">
                    <i class="fas fa-chart-line"></i>
                    <span class="menu-text">Báo Cáo</span>
                </a>
                <a href="/pages/promotions.html" class="menu-item">
                    <i class="fas fa-tags"></i>
                    <span class="menu-text">Khuyến Mãi</span>
                </a>
                <a href="/pages/suppliers.html" class="menu-item">
                    <i class="fas fa-truck"></i>
                    <span class="menu-text">Nhà Cung Cấp</span>
                </a>
                <a href="/pages/settings.html" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span class="menu-text">Cài Đặt</span>
                </a>
            </div>
        </div>

        <!-- Nội dung chính -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1>Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Tìm kiếm sản phẩm, đơn hàng...">
                    </div>
                    <div class="notifications">
                        <i class="fas fa-bell notification-icon"></i>
                        <span class="notification-count">3</span>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">AT</div>
                        <div class="user-info">
                            <span class="user-name">Admin Tùng</span>
                            <span class="user-role">Quản trị viên</span>
                        </div>
                        <i class="fas fa-chevron-down" style="color: var(--gray-500); font-size: 14px;"></i>
                    </div>
                </div>
            </header>

            <!-- Nội dung Dashboard -->
            <div class="dashboard-content">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon revenue">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3>52.45M</h3>
                            <p>Doanh thu hôm nay</p>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>12.5% so với hôm qua</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon orders">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3>24</h3>
                            <p>Đơn hàng mới</p>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>8.2% so với hôm qua</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon products">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3>3</h3>
                            <p>Sản phẩm sắp hết hàng</p>
                            <div class="stat-change negative">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Cần nhập thêm</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon customers">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>15</h3>
                            <p>Khách hàng mới</p>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>5.7% so với tuần trước</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts & Tables -->
                <div class="content-section">
                    <!-- Biểu đồ -->
                    <div class="chart-container">
                        <div class="section-header">
                            <h2 class="section-title">Doanh thu 7 ngày qua</h2>
                            <a href="#" class="section-action">
                                Xem chi tiết
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                        <div class="chart-wrapper">
                            <div class="chart-placeholder" id="revenueChart">
                                <!-- Biểu đồ sẽ được tạo bằng JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Hoạt động gần đây -->
                    <div class="activity-container">
                        <div class="section-header">
                            <h2 class="section-title">Hoạt động gần đây</h2>
                            <a href="#" class="section-action">
                                Xem tất cả
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon order">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Đơn hàng mới #HD20241015-012</p>
                                    <span>5 phút trước • Khách hàng Nguyễn Văn A</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon product">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Nhập hàng iPhone 15 Pro 128GB</p>
                                    <span>1 giờ trước • Số lượng: 20 chiếc</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon user">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Khách hàng mới đăng ký</p>
                                    <span>2 giờ trước • Lê Thị B</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon stock">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Samsung Galaxy S23 Ultra sắp hết</p>
                                    <span>3 giờ trước • Chỉ còn 5 chiếc</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Đơn hàng gần đây & Hành động nhanh -->
                <div class="content-section">
                    <!-- Đơn hàng gần đây -->
                    <div class="table-container">
                        <div class="section-header">
                            <h2 class="section-title">Đơn hàng gần đây</h2>
                            <a href="#" class="section-action">
                                Xem tất cả
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Mã đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Tổng tiền</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>HD20241015-012</td>
                                    <td>Nguyễn Văn A</td>
                                    <td>25,490,000₫</td>
                                    <td><span class="status-badge pending">Chờ xử lý</span></td>
                                    <td>
                                        <button class="btn btn-primary" style="padding: 8px 16px; font-size: 13px;">
                                            <i class="fas fa-eye"></i>
                                            Xem
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>HD20241014-089</td>
                                    <td>Trần Thị B</td>
                                    <td>18,750,000₫</td>
                                    <td><span class="status-badge processing">Đang giao</span></td>
                                    <td>
                                        <button class="btn btn-primary" style="padding: 8px 16px; font-size: 13px;">
                                            <i class="fas fa-eye"></i>
                                            Xem
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>HD20241014-076</td>
                                    <td>Lê Văn C</td>
                                    <td>32,990,000₫</td>
                                    <td><span class="status-badge completed">Hoàn thành</span></td>
                                    <td>
                                        <button class="btn btn-primary" style="padding: 8px 16px; font-size: 13px;">
                                            <i class="fas fa-eye"></i>
                                            Xem
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>HD20241013-054</td>
                                    <td>Phạm Thị D</td>
                                    <td>12,450,000₫</td>
                                    <td><span class="status-badge completed">Hoàn thành</span></td>
                                    <td>
                                        <button class="btn btn-primary" style="padding: 8px 16px; font-size: 13px;">
                                            <i class="fas fa-eye"></i>
                                            Xem
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Hành động nhanh -->
                    <div class="table-container">
                        <div class="section-header">
                            <h2 class="section-title">Hành động nhanh</h2>
                        </div>
                        <div class="quick-actions">
                            <button class="action-btn" id="addProductBtn">
                                <i class="fas fa-plus-circle"></i>
                                <span>Thêm sản phẩm</span>
                            </button>
                            <button class="action-btn" id="addOrderBtn">
                                <i class="fas fa-cart-plus"></i>
                                <span>Tạo đơn hàng</span>
                            </button>
                            <button class="action-btn" id="importStockBtn">
                                <i class="fas fa-dolly"></i>
                                <span>Nhập kho</span>
                            </button>
                            <button class="action-btn" id="addCustomerBtn">
                                <i class="fas fa-user-plus"></i>
                                <span>Thêm khách hàng</span>
                            </button>
                            <button class="action-btn" id="generateReportBtn">
                                <i class="fas fa-chart-bar"></i>
                                <span>Báo cáo</span>
                            </button>
                            <button class="action-btn" id="manageUsersBtn">
                                <i class="fas fa-user-cog"></i>
                                <span>Quản lý người dùng</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="footer">
                    <p>© 2023 Phone-Store Admin Dashboard. Phiên bản 2.1.0 | Được phát triển dựa trên Database Schema của cửa hàng điện thoại</p>
                    <p style="margin-top: 8px; font-size: 13px; color: var(--gray-400);">Thiết kế hiện đại với hiệu ứng Glassmorphism & Micro-interactions</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal thêm sản phẩm -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm sản phẩm mới</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <div class="form-group">
                        <label class="form-label" for="productName">
                            <i class="fas fa-box"></i>
                            Tên sản phẩm
                        </label>
                        <input type="text" class="form-control" id="productName" placeholder="VD: iPhone 15 Pro 128GB" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productBrand">
                            <i class="fas fa-tag"></i>
                            Thương hiệu
                        </label>
                        <select class="form-control" id="productBrand" required>
                            <option value="">Chọn thương hiệu</option>
                            <option value="1">Apple</option>
                            <option value="2">Samsung</option>
                            <option value="3">Xiaomi</option>
                            <option value="4">Oppo</option>
                            <option value="5">Vivo</option>
                            <option value="6">Realme</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productCategory">
                            <i class="fas fa-list"></i>
                            Danh mục
                        </label>
                        <select class="form-control" id="productCategory" required>
                            <option value="">Chọn danh mục</option>
                            <option value="Flagship">Flagship</option>
                            <option value="Mid-range">Tầm trung</option>
                            <option value="Budget">Giá rẻ</option>
                            <option value="Accessory">Phụ kiện</option>
                            <option value="Tablet">Máy tính bảng</option>
                            <option value="Smartwatch">Đồng hồ thông minh</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productPrice">
                            <i class="fas fa-money-bill-wave"></i>
                            Giá bán (VNĐ)
                        </label>
                        <input type="number" class="form-control" id="productPrice" placeholder="VD: 25490000" min="0" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productStock">
                            <i class="fas fa-warehouse"></i>
                            Số lượng tồn kho
                        </label>
                        <input type="number" class="form-control" id="productStock" placeholder="VD: 50" min="0" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productDescription">
                            <i class="fas fa-align-left"></i>
                            Mô tả sản phẩm
                        </label>
                        <textarea class="form-control" id="productDescription" rows="3" placeholder="Mô tả chi tiết về sản phẩm..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelProductBtn">
                    <i class="fas fa-times"></i>
                    Hủy
                </button>
                <button class="btn btn-primary" id="saveProductBtn">
                    <i class="fas fa-save"></i>
                    Lưu sản phẩm
                </button>
            </div>
        </div>
    </div>

    <!-- Modal tạo đơn hàng -->
    <div class="modal" id="addOrderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Tạo đơn hàng mới</h3>
                <button class="modal-close" id="closeOrderModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="orderForm">
                    <div class="form-group">
                        <label class="form-label" for="orderCustomer">
                            <i class="fas fa-user"></i>
                            Khách hàng
                        </label>
                        <input type="text" class="form-control" id="orderCustomer" placeholder="Chọn hoặc nhập tên khách hàng" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="orderProduct">
                            <i class="fas fa-box"></i>
                            Sản phẩm
                        </label>
                        <select class="form-control" id="orderProduct" required>
                            <option value="">Chọn sản phẩm</option>
                            <option value="1">iPhone 15 Pro 128GB</option>
                            <option value="2">Samsung Galaxy S23 Ultra</option>
                            <option value="3">Xiaomi 13 Pro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="orderQuantity">
                            <i class="fas fa-calculator"></i>
                            Số lượng
                        </label>
                        <input type="number" class="form-control" id="orderQuantity" placeholder="Nhập số lượng" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="orderPhone">
                            <i class="fas fa-phone"></i>
                            Số điện thoại
                        </label>
                        <input type="tel" class="form-control" id="orderPhone" placeholder="Nhập số điện thoại khách hàng" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="orderAddress">
                            <i class="fas fa-map-marker-alt"></i>
                            Địa chỉ giao hàng
                        </label>
                        <textarea class="form-control" id="orderAddress" rows="2" placeholder="Nhập địa chỉ giao hàng..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelOrderBtn">
                    <i class="fas fa-times"></i>
                    Hủy
                </button>
                <button class="btn btn-primary" id="saveOrderBtn">
                    <i class="fas fa-save"></i>
                    Tạo đơn hàng
                </button>
            </div>
        </div>
    </div>

    <!-- Modal nhập kho -->
    <div class="modal" id="importStockModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nhập kho hàng</h3>
                <button class="modal-close" id="closeImportModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="importForm">
                    <div class="form-group">
                        <label class="form-label" for="importProduct">
                            <i class="fas fa-box"></i>
                            Sản phẩm
                        </label>
                        <select class="form-control" id="importProduct" required>
                            <option value="">Chọn sản phẩm</option>
                            <option value="1">iPhone 15 Pro 128GB</option>
                            <option value="2">Samsung Galaxy S23 Ultra</option>
                            <option value="3">Xiaomi 13 Pro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="importQuantity">
                            <i class="fas fa-calculator"></i>
                            Số lượng nhập
                        </label>
                        <input type="number" class="form-control" id="importQuantity" placeholder="Nhập số lượng" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="importSupplier">
                            <i class="fas fa-truck"></i>
                            Nhà cung cấp
                        </label>
                        <select class="form-control" id="importSupplier" required>
                            <option value="">Chọn nhà cung cấp</option>
                            <option value="1">Nhà cung cấp A</option>
                            <option value="2">Nhà cung cấp B</option>
                            <option value="3">Nhà cung cấp C</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="importPrice">
                            <i class="fas fa-money-bill-wave"></i>
                            Giá nhập (VNĐ/cái)
                        </label>
                        <input type="number" class="form-control" id="importPrice" placeholder="Nhập giá" min="0" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="importNote">
                            <i class="fas fa-sticky-note"></i>
                            Ghi chú
                        </label>
                        <textarea class="form-control" id="importNote" rows="2" placeholder="Ghi chú về phiếu nhập kho..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelImportBtn">
                    <i class="fas fa-times"></i>
                    Hủy
                </button>
                <button class="btn btn-primary" id="saveImportBtn">
                    <i class="fas fa-save"></i>
                    Lưu phiếu nhập
                </button>
            </div>
        </div>
    </div>

    <!-- Modal thêm khách hàng -->
    <div class="modal" id="addCustomerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm khách hàng mới</h3>
                <button class="modal-close" id="closeCustomerModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-group">
                        <label class="form-label" for="customerName">
                            <i class="fas fa-user"></i>
                            Tên khách hàng
                        </label>
                        <input type="text" class="form-control" id="customerName" placeholder="Nhập tên khách hàng" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="customerPhone">
                            <i class="fas fa-phone"></i>
                            Số điện thoại
                        </label>
                        <input type="tel" class="form-control" id="customerPhone" placeholder="Nhập số điện thoại" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="customerEmail">
                            <i class="fas fa-envelope"></i>
                            Email
                        </label>
                        <input type="email" class="form-control" id="customerEmail" placeholder="Nhập email">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="customerAddress">
                            <i class="fas fa-map-marker-alt"></i>
                            Địa chỉ
                        </label>
                        <textarea class="form-control" id="customerAddress" rows="2" placeholder="Nhập địa chỉ..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="customerType">
                            <i class="fas fa-tag"></i>
                            Loại khách hàng
                        </label>
                        <select class="form-control" id="customerType" required>
                            <option value="regular">Khách hàng thường</option>
                            <option value="vip">Khách hàng VIP</option>
                            <option value="corporate">Khách hàng doanh nghiệp</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelCustomerBtn">
                    <i class="fas fa-times"></i>
                    Hủy
                </button>
                <button class="btn btn-primary" id="saveCustomerBtn">
                    <i class="fas fa-save"></i>
                    Thêm khách hàng
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="successToast">
        <div class="toast-icon success">
            <i class="fas fa-check"></i>
        </div>
        <div class="toast-content">
            <h4 id="toastTitle">Thành công!</h4>
            <p id="toastMessage">Hành động đã được thực hiện thành công.</p>
        </div>
        <button class="toast-close" id="closeToast">&times;</button>
    </div>

    <script>
        // ========== KHỞI TẠO BIẾN ==========
        const toggleSidebar = document.getElementById('toggleSidebar');
        const menuItems = document.querySelectorAll('.menu-item');
        const addProductBtn = document.getElementById('addProductBtn');
        const addOrderBtn = document.getElementById('addOrderBtn');
        const importStockBtn = document.getElementById('importStockBtn');
        const addCustomerBtn = document.getElementById('addCustomerBtn');
        const generateReportBtn = document.getElementById('generateReportBtn');
        const manageUsersBtn = document.getElementById('manageUsersBtn');
        const searchInput = document.querySelector('.search-box input');
        const notifications = document.querySelector('.notifications');
        const revenueChart = document.getElementById('revenueChart');
        const userProfile = document.querySelector('.user-profile');
        const successToast = document.getElementById('successToast');
        const closeToast = document.getElementById('closeToast');

        // ========== SIDEBAR TOGGLE ==========
        toggleSidebar.addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('collapsed');
            const icon = this.querySelector('i');
            icon.style.transform = 'rotate(180deg)';
            setTimeout(() => {
                icon.style.transform = '';
            }, 300);
        });

        // ========== MENU ACTIVE STATE ==========
        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                menuItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size/2;
                const y = e.clientY - rect.top - size/2;

                ripple.style.cssText = `
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.5);
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    width: ${size}px;
                    height: ${size}px;
                    top: ${y}px;
                    left: ${x}px;
                `;

                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });

        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // ========== MODAL FUNCTIONS ==========
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal khi click bên ngoài
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                const modalId = e.target.id;
                closeModal(modalId);
            }
        });

        // ========== MODAL THÊM SẢN PHẨM ==========
        addProductBtn.addEventListener('click', () => openModal('addProductModal'));
        document.getElementById('closeProductModal').addEventListener('click', () => closeModal('addProductModal'));
        document.getElementById('cancelProductBtn').addEventListener('click', () => closeModal('addProductModal'));

        document.getElementById('saveProductBtn').addEventListener('click', function() {
            const form = document.getElementById('productForm');
            if (!form.checkValidity()) {
                showToast('Lỗi', 'Vui lòng điền đầy đủ thông tin sản phẩm!', 'error');
                return;
            }

            const productName = document.getElementById('productName').value;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang xử lý...';
            this.disabled = true;

            setTimeout(() => {
                form.reset();
                closeModal('addProductModal');
                showToast('Thành công!', `Đã thêm sản phẩm "${productName}" vào hệ thống.`);
                this.innerHTML = '<i class="fas fa-save"></i> Lưu sản phẩm';
                this.disabled = false;
                updateProductBadge();
            }, 1500);
        });

        // ========== MODAL TẠO ĐƠN HÀNG ==========
        addOrderBtn.addEventListener('click', () => openModal('addOrderModal'));
        document.getElementById('closeOrderModal').addEventListener('click', () => closeModal('addOrderModal'));
        document.getElementById('cancelOrderBtn').addEventListener('click', () => closeModal('addOrderModal'));

        document.getElementById('saveOrderBtn').addEventListener('click', function() {
            const form = document.getElementById('orderForm');
            if (!form.checkValidity()) {
                showToast('Lỗi', 'Vui lòng điền đầy đủ thông tin đơn hàng!', 'error');
                return;
            }

            const customerName = document.getElementById('orderCustomer').value;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang xử lý...';
            this.disabled = true;

            setTimeout(() => {
                form.reset();
                closeModal('addOrderModal');
                showToast('Thành công!', `Đã tạo đơn hàng cho khách hàng "${customerName}".`);
                this.innerHTML = '<i class="fas fa-save"></i> Tạo đơn hàng';
                this.disabled = false;
                updateOrderBadge();
            }, 1500);
        });

        // ========== MODAL NHẬP KHO ==========
        importStockBtn.addEventListener('click', () => openModal('importStockModal'));
        document.getElementById('closeImportModal').addEventListener('click', () => closeModal('importStockModal'));
        document.getElementById('cancelImportBtn').addEventListener('click', () => closeModal('importStockModal'));

        document.getElementById('saveImportBtn').addEventListener('click', function() {
            const form = document.getElementById('importForm');
            if (!form.checkValidity()) {
                showToast('Lỗi', 'Vui lòng điền đầy đủ thông tin nhập kho!', 'error');
                return;
            }

            const quantity = document.getElementById('importQuantity').value;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang xử lý...';
            this.disabled = true;

            setTimeout(() => {
                form.reset();
                closeModal('importStockModal');
                showToast('Thành công!', `Đã nhập kho ${quantity} sản phẩm.`);
                this.innerHTML = '<i class="fas fa-save"></i> Lưu phiếu nhập';
                this.disabled = false;
            }, 1500);
        });

        // ========== MODAL THÊM KHÁCH HÀNG ==========
        addCustomerBtn.addEventListener('click', () => openModal('addCustomerModal'));
        document.getElementById('closeCustomerModal').addEventListener('click', () => closeModal('addCustomerModal'));
        document.getElementById('cancelCustomerBtn').addEventListener('click', () => closeModal('addCustomerModal'));

        document.getElementById('saveCustomerBtn').addEventListener('click', function() {
            const form = document.getElementById('customerForm');
            if (!form.checkValidity()) {
                showToast('Lỗi', 'Vui lòng điền đầy đủ thông tin khách hàng!', 'error');
                return;
            }

            const customerName = document.getElementById('customerName').value;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang xử lý...';
            this.disabled = true;

            setTimeout(() => {
                form.reset();
                closeModal('addCustomerModal');
                showToast('Thành công!', `Đã thêm khách hàng "${customerName}" vào hệ thống.`);
                this.innerHTML = '<i class="fas fa-save"></i> Thêm khách hàng';
                this.disabled = false;
            }, 1500);
        });

        // ========== QUICK ACTIONS KHÁC ==========
        generateReportBtn.addEventListener('click', function() {
            showToast('Báo cáo', 'Đang tạo báo cáo. Vui lòng chờ...', 'info');
            setTimeout(() => {
                showToast('Thành công!', 'Báo cáo đã được tạo. Vui lòng kiểm tra email của bạn.');
            }, 2000);
        });

        manageUsersBtn.addEventListener('click', function() {
            showToast('Quản lý người dùng', 'Chuyển hướng đến trang quản lý người dùng...', 'info');
            setTimeout(() => {
                window.location.href = '/pages/settings.html';
            }, 1000);
        });

        // ========== TÌM KIẾM ==========
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                const searchTerm = this.value;
                showToast('Tìm kiếm', `Tìm kiếm: "${searchTerm}"`, 'info');
                this.value = '';
            }
        });

        // ========== THÔNG BÁO ==========
        notifications.addEventListener('click', function() {
            const notificationCount = document.querySelector('.notification-count');
            const currentCount = parseInt(notificationCount.textContent);
            
            if (currentCount > 0) {
                notificationCount.textContent = '0';
                notificationCount.style.background = 'var(--gray-400)';
                showToast('Thông báo', `Bạn có ${currentCount} thông báo chưa đọc.`);
            }
        });

        // ========== USER PROFILE ==========
        userProfile.addEventListener('click', function() {
            showToast('Thông tin người dùng', 'Hộp thoại tài khoản đang được phát triển!', 'info');
        });

        // ========== HOẠT ĐỘNG GẦN ĐÂY ==========
        document.querySelectorAll('.activity-item').forEach(item => {
            item.addEventListener('click', function() {
                const activityText = this.querySelector('.activity-details p').textContent;
                showToast('Chi tiết hoạt động', activityText);
            });
        });

        // ========== BIỂU ĐỒ DOANH THU ==========
        function renderRevenueChart() {
            const chartData = [42, 38, 45, 52, 48, 55, 52];
            const days = ['Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7', 'CN'];
            const maxValue = Math.max(...chartData);

            revenueChart.innerHTML = '';
            revenueChart.style.position = 'relative';
            revenueChart.style.display = 'flex';
            revenueChart.style.alignItems = 'flex-end';
            revenueChart.style.justifyContent = 'space-around';
            revenueChart.style.height = '100%';
            revenueChart.style.padding = '20px';
            revenueChart.style.background = 'linear-gradient(135deg, #f8f9fa 0%, #f1f3f9 100%)';

            // Grid lines
            const grid = document.createElement('div');
            grid.style.position = 'absolute';
            grid.style.top = '0';
            grid.style.left = '0';
            grid.style.width = '100%';
            grid.style.height = '100%';
            grid.style.display = 'flex';
            grid.style.flexDirection = 'column';
            grid.style.justifyContent = 'space-between';
            grid.style.pointerEvents = 'none';

            for (let i = 0; i <= 5; i++) {
                const line = document.createElement('div');
                line.style.borderTop = '1px dashed rgba(0,0,0,0.1)';
                line.style.width = '100%';
                grid.appendChild(line);
            }

            revenueChart.appendChild(grid);

            // Bars
            for (let i = 0; i < chartData.length; i++) {
                const barContainer = document.createElement('div');
                barContainer.style.display = 'flex';
                barContainer.style.flexDirection = 'column';
                barContainer.style.alignItems = 'center';
                barContainer.style.width = '50px';
                barContainer.style.position = 'relative';
                barContainer.style.zIndex = '1';
                barContainer.style.cursor = 'pointer';

                const bar = document.createElement('div');
                const heightPercent = (chartData[i] / maxValue) * 100;
                bar.style.width = '30px';
                bar.style.height = `${heightPercent}%`;
                bar.style.minHeight = '20px';
                bar.style.background = i === chartData.length - 1
                    ? 'linear-gradient(to top, #ff6b6b, #ee5a6f)'
                    : 'linear-gradient(to top, #4f46e5, #3b82f6)';
                bar.style.borderRadius = '8px 8px 0 0';
                bar.style.transition = 'all 0.3s ease';
                bar.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';
                bar.style.position = 'relative';
                bar.style.overflow = 'hidden';

                bar.addEventListener('mouseover', function() {
                    this.style.transform = 'scale(1.1) translateY(-8px)';
                    this.style.boxShadow = '0 8px 24px rgba(0,0,0,0.2)';

                    const tooltip = document.createElement('div');
                    tooltip.textContent = `${chartData[i]}M VNĐ`;
                    tooltip.style.position = 'absolute';
                    tooltip.style.top = '-40px';
                    tooltip.style.left = '50%';
                    tooltip.style.transform = 'translateX(-50%)';
                    tooltip.style.background = 'var(--dark-color)';
                    tooltip.style.color = 'white';
                    tooltip.style.padding = '8px 14px';
                    tooltip.style.borderRadius = '6px';
                    tooltip.style.fontSize = '12px';
                    tooltip.style.fontWeight = '600';
                    tooltip.style.whiteSpace = 'nowrap';
                    tooltip.style.boxShadow = '0 4px 12px rgba(0,0,0,0.25)';
                    tooltip.style.zIndex = '10';
                    tooltip.classList.add('bar-tooltip');

                    const arrow = document.createElement('div');
                    arrow.style.position = 'absolute';
                    arrow.style.bottom = '-8px';
                    arrow.style.left = '50%';
                    arrow.style.transform = 'translateX(-50%)';
                    arrow.style.width = '0';
                    arrow.style.height = '0';
                    arrow.style.borderLeft = '6px solid transparent';
                    arrow.style.borderRight = '6px solid transparent';
                    arrow.style.borderTop = '8px solid var(--dark-color)';

                    tooltip.appendChild(arrow);
                    this.appendChild(tooltip);
                });

                bar.addEventListener('mouseout', function() {
                    this.style.transform = 'scale(1) translateY(0)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';
                    const tooltip = this.querySelector('.bar-tooltip');
                    if (tooltip) tooltip.remove();
                });

                bar.addEventListener('click', function() {
                    showToast('Thống kê ngày', `Doanh thu ${days[i]}: ${chartData[i]}M VNĐ`);
                });

                const label = document.createElement('div');
                label.textContent = days[i];
                label.style.marginTop = '12px';
                label.style.fontSize = '13px';
                label.style.fontWeight = '500';
                label.style.color = 'var(--gray-600)';
                label.style.width = '100%';
                label.style.textAlign = 'center';

                barContainer.appendChild(bar);
                barContainer.appendChild(label);
                revenueChart.appendChild(barContainer);
            }

            // Animation
            setTimeout(() => {
                const bars = revenueChart.querySelectorAll('div > div:first-child');
                bars.forEach((bar, index) => {
                    bar.style.opacity = '0';
                    bar.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        bar.style.transition = 'all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
                        bar.style.opacity = '1';
                        bar.style.transform = 'translateY(0)';
                    }, index * 80);
                });
            }, 100);
        }

        // ========== TOAST NOTIFICATION ==========
        function showToast(title, message, type = 'success') {
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;

            const toastIcon = successToast.querySelector('.toast-icon');
            const iconMap = {
                'success': { bg: 'linear-gradient(45deg, #10b981, #059669)', icon: '<i class="fas fa-check"></i>' },
                'error': { bg: 'linear-gradient(45deg, #ef4444, #dc2626)', icon: '<i class="fas fa-times"></i>' },
                'warning': { bg: 'linear-gradient(45deg, #f59e0b, #d97706)', icon: '<i class="fas fa-exclamation-triangle"></i>' },
                'info': { bg: 'linear-gradient(45deg, #3b82f6, #2563eb)', icon: '<i class="fas fa-info-circle"></i>' }
            };

            const config = iconMap[type] || iconMap['success'];
            toastIcon.style.background = config.bg;
            toastIcon.innerHTML = config.icon;

            successToast.classList.add('show');
            setTimeout(() => {
                successToast.classList.remove('show');
            }, 4000);
        }

        closeToast.addEventListener('click', function() {
            successToast.classList.remove('show');
        });

        // ========== ĐÓNG TOAST KHI CLICK RA NGOÀI ==========
        window.addEventListener('click', function(e) {
            if (successToast.classList.contains('show') && !successToast.contains(e.target) && e.target !== closeToast) {
                successToast.classList.remove('show');
            }
        });

        // ========== RESET BADGE ANIMATION ==========
        function resetBadgeAnimation(selector) {
            const badge = document.querySelector(selector);
            if (badge) {
                badge.addEventListener('animationend', function() {
                    badge.style.animation = '';
                });
            }
        }
        resetBadgeAnimation('.menu-item:nth-child(2) .menu-badge');
        resetBadgeAnimation('.menu-item:nth-child(3) .menu-badge');

        // ========== DARK MODE ==========
        let isDarkMode = false;
        function setDarkMode(enable) {
            isDarkMode = enable;
            if (enable) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }
        // Toggle dark mode button
        document.addEventListener('DOMContentLoaded', function() {
            // ...existing code...
            darkModeToggle.addEventListener('click', function() {
                setDarkMode(!isDarkMode);
                showToast('Thông báo', isDarkMode ? 'Đã bật chế độ tối!' : 'Đã tắt chế độ tối!', 'info');
            });
            // ...existing code...
        });

        // ========== LƯU KHÁCH HÀNG VÀO LOCALSTORAGE ==========
        function saveCustomerToStorage(data) {
            let customers = JSON.parse(localStorage.getItem('customers') || '[]');
            customers.push(data);
            localStorage.setItem('customers', JSON.stringify(customers));
        }
        document.getElementById('saveCustomerBtn').addEventListener('click', function() {
            // ...existing code...
            setTimeout(() => {
                // ...existing code...
                saveCustomerToStorage({
                    name: customerName,
                    phone: document.getElementById('customerPhone').value,
                    email: document.getElementById('customerEmail').value,
                    address: document.getElementById('customerAddress').value,
                    type: document.getElementById('customerType').value
                });
                // ...existing code...
            }, 1500);
        });

        // ========== LƯU SẢN PHẨM VÀO LOCALSTORAGE ==========
        function saveProductToStorage(data) {
            let products = JSON.parse(localStorage.getItem('products') || '[]');
            products.push(data);
            localStorage.setItem('products', JSON.stringify(products));
        }
        document.getElementById('saveProductBtn').addEventListener('click', function() {
            // ...existing code...
            setTimeout(() => {
                // ...existing code...
                saveProductToStorage({
                    name: productName,
                    brand: document.getElementById('productBrand').value,
                    category: document.getElementById('productCategory').value,
                    price: document.getElementById('productPrice').value,
                    stock: document.getElementById('productStock').value,
                    description: document.getElementById('productDescription').value
                });
                // ...existing code...
            }, 1500);
        });

        // ========== LƯU ĐƠN HÀNG VÀO LOCALSTORAGE ==========
        function saveOrderToStorage(data) {
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(data);
            localStorage.setItem('orders', JSON.stringify(orders));
        }
        document.getElementById('saveOrderBtn').addEventListener('click', function() {
            // ...existing code...
            setTimeout(() => {
                // ...existing code...
                saveOrderToStorage({
                    customer: customerName,
                    product: document.getElementById('orderProduct').value,
                    quantity: document.getElementById('orderQuantity').value,
                    phone: document.getElementById('orderPhone').value,
                    address: document.getElementById('orderAddress').value
                });
                // ...existing code...
            }, 1500);
        });

        // ========== LƯU NHẬP KHO VÀO LOCALSTORAGE ==========
        function saveImportToStorage(data) {
            let imports = JSON.parse(localStorage.getItem('imports') || '[]');
            imports.push(data);
            localStorage.setItem('imports', JSON.stringify(imports));
        }
        document.getElementById('saveImportBtn').addEventListener('click', function() {
            // ...existing code...
            setTimeout(() => {
                // ...existing code...
                saveImportToStorage({
                    product: document.getElementById('importProduct').value,
                    quantity: document.getElementById('importQuantity').value,
                    supplier: document.getElementById('importSupplier').value,
                    price: document.getElementById('importPrice').value,
                    note: document.getElementById('importNote').value
                });
                // ...existing code...
            }, 1500);
        });

        // ========== CSS DARK MODE ==========
        const darkModeStyle = document.createElement('style');
        darkModeStyle.textContent = `
            body.dark-mode {
                background: #18181b !important;
                color: #e5e7eb !important;
            }
            body.dark-mode .app-container,
            body.dark-mode .main-content,
            body.dark-mode .sidebar {
                background: #23232a !important;
                color: #e5e7eb !important;
            }
            body.dark-mode .stat-card,
            body.dark-mode .modal-content,
            body.dark-mode .data-table,
            body.dark-mode .quick-actions,
            body.dark-mode .section-header,
            body.dark-mode .footer {
                background: #26263a !important;
                color: #e5e7eb !important;
            }
            body.dark-mode .btn,
            body.dark-mode .action-btn {
                background: #3b3b4f !important;
                color: #fff !important;
            }
            body.dark-mode .search-box input {
                background: #23232a !important;
                color: #fff !important;
            }
            body.dark-mode .menu-item.active,
            body.dark-mode .sidebar-menu .menu-item:hover {
                background: #3b3b4f !important;
                color: #fff !important;
            }
        `;
        document.head.appendChild(darkModeStyle);

        // ========== KHỞI TẠO ==========
        document.addEventListener('DOMContentLoaded', function() {
            renderRevenueChart();

            // Animate stat cards
            document.querySelectorAll('.stat-card').forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'opacity 0.6s ease, transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });

            // Dark mode toggle
            const darkModeToggle = document.createElement('button');
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            darkModeToggle.title = 'Toggle Dark Mode';
            darkModeToggle.style.cssText = `
                position: fixed;
                bottom: 24px;
                right: 24px;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: var(--primary-color);
                color: white;
                border: none;
                cursor: pointer;
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
                z-index: 999;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
                transition: all 0.3s ease;
            `;

            darkModeToggle.addEventListener('mouseover', function() {
                this.style.transform = 'scale(1.1)';
                this.style.boxShadow = '0 12px 32px rgba(0,0,0,0.2)';
            });

            darkModeToggle.addEventListener('mouseout', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = '0 8px 24px rgba(0,0,0,0.15)';
            });

            darkModeToggle.addEventListener('click', function() {
                showToast('Thông báo', 'Chế độ tối đang được phát triển!', 'info');
            });

            document.body.appendChild(darkModeToggle);
        });
    </script>
</body>
</html>
